# Upgrading the system

This section contains a practical guide on `Gentoo` system upgrades.

## Updating packages

To upgrade the system, first sync the package repository:

```sh
sudo emerge --sync
```

Update all packages:

```sh
sudo emerge --ask --verbose --update --deep --newuse @world
```

Now clean up:

```sh
sudo emerge --ask --depclean
```

As a safety measure, run update again:

```sh
sudo emerge --ask --verbose --update --deep --newuse @world
```

## Updating config files

Sometimes after package updates you will be prompted to update config files. For doing that, make sure that you've read the news:

```sh
sudo eselect news read
```

Then run the following command:

```sh
sudo dispatch-config
```

This command will display a list of changes, you need to press `m` to start merging. The tool will display changes one by one, type `l` to accept the older version and `r` to accept a newer version.
At the end of merging, press `u` to accept the merged version, and the tool will present you the next file which needs updating.
